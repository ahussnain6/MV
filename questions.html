<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MedAI | Doctor Assessment</title>

  <link rel="stylesheet" href="m2.css">
  <link rel="stylesheet" href="questions.css">
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
</head>
<body>
 <aside class="sidebar">
  <div class="sidebar-header">
    <img src="https://res.cloudinary.com/dlcyf2qtl/image/upload/v1761915548/Screenshot_2024-12-25_114712_yc0jrj_wsdgti.png" alt="logo" />
    <h2>VelMed</h2>
  </div>

  <ul class="sidebar-links">
    <h4>
      <span>Main Menu</span>
      <div class="menu-separator"></div>
    </h4>

    <li>
      <a href="index.html">
        <span class="material-symbols-outlined">grid_view</span>
        Sign Up / Log In
      </a>
    </li>

    <li>
      <a href="subs.html">
        <span class="material-symbols-outlined">chat_bubble</span>
        Subscription Plans
      </a>
    </li>

    <li>
      <a href="doc.html">
        <span class="material-symbols-outlined">description</span>
        Medical Documents
      </a>
    </li>

    <li>
      <a href="upload.html">
        <span class="material-symbols-outlined">cloud_upload</span>
        Upload Files
      </a>
    </li>

    <li>
      <a href="questions.html">
        <span class="material-symbols-outlined">cloud_upload</span>
        Patient Questions
      </a>
    </li>

    <li>
      <a href="chat.html">
        <span class="material-symbols-outlined">chat_bubble</span>
        AI Chat Assistant
      </a>
    </li>

    <h4>
      <span>Doctor Panel</span>
      <div class="menu-separator"></div>
    </h4>

    <li>
      <a href="docset.html">
        <span class="material-symbols-outlined">settings_applications</span>
        Doctor Settings
      </a>
    </li>

    <li>
      <a href="docval.html">
        <span class="material-symbols-outlined">verified</span>
        Upload Treatment/Protocols
      </a>
    </li>

    <li>
      <a href="dash.html">
        <span class="material-symbols-outlined">verified</span>
        Doctor Dashboard
      </a>
    </li>

    <li>
      <a href="docchat.html">
        <span class="material-symbols-outlined">verified</span>
        AI Patient Simulation
      </a>
    </li>
  </ul>
</aside>


  <!-- Main Content -->
  <div class="questions-container main-content">
    <div class="questions-card">
      <h2 id="doctorName">Doctor Assessment</h2>
      <p id="doctorSpecialty"></p>

      <div class="quiz-box">
        <div class="progress">
          <span id="stepCount">Question 1 of 5</span>
          <div class="progress-bar">
            <div id="progressFill"></div>
          </div>
        </div>

        <div class="question-area">
          <h3 id="questionText"></h3>
          <input type="text" id="answerInput" placeholder="Type your answer here..." />
        </div>

        <div class="quiz-actions">
          <button id="nextBtn" class="btn-primary">Next</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    // ðŸ”¹ Get Doctor from URL
    const params = new URLSearchParams(window.location.search);

    const doctor = JSON.parse(decodeURIComponent(params.get("doctor")));
 

    document.getElementById("doctorName").textContent = doctor.name + " has a few questions for you";
    document.getElementById("doctorSpecialty").textContent = "Specialty: " + doctor.specialty;

    // ðŸ”¹ Question Bank (5â€“6 each)
    const specialtyQuestions = {
      Cardiology: [
        "Do you experience chest pain or shortness of breath?",
        "Have you noticed irregular heartbeats or palpitations?",
        "Do you have a history of high blood pressure or cholesterol?",
        "Do you feel fatigue during mild physical activity?",
        "Are you currently taking any heart-related medication?",
        "Any family history of heart disease?"
      ],
      Dermatology: [
        "What skin issue are you currently facing?",
        "Where on your body is the problem located?",
        "Is there itching, pain, or bleeding?",
        "How long has this condition been present?",
        "Have you used any new products recently?",
        "Does it worsen in heat or sunlight?"
      ],
      Pediatrics: [
        "What is the childâ€™s age?",
        "What symptoms are you noticing?",
        "Has there been fever, vomiting, or diarrhea?",
        "Is the child eating and sleeping normally?",
        "Any recent vaccinations?",
        "Has the child had similar issues before?"
      ],
      Psychiatry: [
        "Have you been feeling anxious, low, or emotionally overwhelmed?",
        "How has your sleep been in recent weeks?",
        "Do you experience panic attacks or racing thoughts?",
        "Are you feeling motivated for daily tasks?",
        "Are you currently on any mental health medication?",
        "Have you noticed changes in mood or behavior?"
      ],
      Neurology: [
        "Do you experience headaches, dizziness, or numbness?",
        "Have you had any seizures or fainting episodes?",
        "Any memory or concentration difficulties?",
        "Do you experience tingling in limbs?",
        "Are symptoms getting worse over time?",
        "Any prior neurological diagnosis?"
      ],
      Nutrition: [
        "What is your primary health goal?",
        "Do you follow any specific diet?",
        "How often do you exercise weekly?",
        "Any food allergies or intolerances?",
        "Do you experience fatigue after meals?",
        "Are you currently tracking calories or macros?"
      ],
      Physiotherapy: [
        "Do you have muscle or joint pain?",
        "Where is the pain located?",
        "Did this start after an injury or surgery?",
        "Does movement worsen the pain?",
        "Are you able to perform daily activities?",
        "Have you had physiotherapy before?"
      ]
    };

    const questions = doctor.questions || specialtyQuestions[doctor.specialty] || ["Please describe your concern."];

    let currentIndex = 0;
    const answers = [];

    const questionText = document.getElementById("questionText");
    const answerInput = document.getElementById("answerInput");
    const nextBtn = document.getElementById("nextBtn");
    const stepCount = document.getElementById("stepCount");
    const progressFill = document.getElementById("progressFill");

    function loadQuestion() {
      questionText.textContent = questions[currentIndex];
      answerInput.value = "";
      stepCount.textContent = `Question ${currentIndex + 1} of ${questions.length}`;
      progressFill.style.width = ((currentIndex + 1) / questions.length) * 100 + "%";
    }

    loadQuestion();

    nextBtn.addEventListener("click", () => {
      const answer = answerInput.value.trim();
      if (!answer) {
        alert("Please provide an answer.");
        return;
      }

      answers.push(answer);
      currentIndex++;

      if (currentIndex < questions.length) {
        loadQuestion();
      } else {
        // ðŸ”¹ Send data to AI Chat page
        const payload = {
          doctor: doctor,
          answers: answers
        };

        const encodedData = encodeURIComponent(JSON.stringify(payload));
        window.location.href = `chat.html?doctor=${encodedData}`;
      }
    });
  </script>

</body>
</html>
